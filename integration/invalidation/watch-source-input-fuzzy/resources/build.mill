package build

import mill.*
import mill.define.BuildCtx

def sources = Task.Sources("src")

def mainTask = Task {
  val sourceCount = sources().map(_.size)
  println(s"Found $sourceCount sources")
}

// Wait for the instruction to exit from the test.
BuildCtx.withFilesystemCheckerDisabled {
  if (os.read(moduleDir / "watchValue.txt").contains("exit")) {
    Thread.sleep(1000)
    System.exit(0)
  }
}
